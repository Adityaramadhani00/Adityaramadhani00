Config = {
    Tree_ID = 8773,
    TakeSeed_X = 86,
    TakeSeed_Y = 1,
}

function log(x)
    SendVariantList({[0] = "OnTextOverlay", [1] = "`w[ `cSCRIPT xMrLucky `w] : " .. x})
    LogToConsole("`w[ `cSCRIPT xMrLucky `w] : " .. x)
end

function pos()
    return math.floor(GetLocal().pos.x / 32), math.floor(GetLocal().pos.y / 32)
end

function packet(t, v, x, y)
    SendPacketRaw(false, {type = t, value = v, px = x, py = y, x = GetLocal().pos.x, y = GetLocal().pos.y})
end

function findItem(id)
    for _, v in pairs(GetObjectList()) do
        if v.id == id then return v end
    end
    return nil
end

-- Plant at (x, y)
function pnp(x, y, id)
    local pkt = {}
    pkt.type = 3
    pkt.value = id
    pkt.x = GetLocal().pos.x
    pkt.y = GetLocal().pos.y
    pkt.px = x
    pkt.py = y
    SendPacketRaw(false, pkt)
end

function takeSeed()
    -- Move to the seed position and wait until you have at least 1 seed
    while GetItemCount(Config.Tree_ID) == 0 do
        log("Taking Seeds to Coordinate")
        FindPath(Config.TakeSeed_X, Config.TakeSeed_Y, 500)
        Sleep(1000)
        -- You may want to add code here to actually pick up the seed if needed.
    end
end

function plant()
    for y = 1, 54 do
        for x = 0, 99 do
            if GetItemCount(Config.Tree_ID) == 0 then
                return -- Out of seeds, go get more
            end
            local tile = GetTile(x, y)
            if tile.fg == 0 then
                FindPath(x, y, 500)
                Sleep(200)
                pnp(x, y, Config.Tree_ID)
                Sleep(200)
            end
        end
    end
end

log("Go Planting Seeds")
while true do
    takeSeed()
    plant()
end